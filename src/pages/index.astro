---
import Layout from "src/layouts/Layout.astro";
import Footer from "src/components/settings/Footer.astro";
import Modal from "src/components/settings/Modal.astro";
const cookies: any = Astro.request.headers.get("cookie");
let tasks: any = await fetch(
  "http://localhost:4321/api/get?user_mail=christopherglood%40gmail.com&mode=find&start_date=2025-01-25&end_date=2025-01-26",
  {
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      Cookie: cookies,
    },
  }
)
  .then((response) => response.json())
  .then((data) => {
    return data.result;
  })
  .catch((error) => console.error("Error:", error));
---

<Layout>
  <main
    style="max-width: 640px;background-color:#17181C;"
    class="flex flex-col min-h-screen py-6 px-8 mx-auto border shadow-lg"
  >
    <div class="flex flex-col gap-4 my-auto max-h-screen">
      {
        tasks.map((task: any) => (
          <div
            style="background-color:#25262B;"
            class="max-h-fit flex flex-row justify-between gap-4 rounded-3xl p-6 hover:shadow-xl transition-shadow duration-500 ease-in-out"
          >
            <button class="w-fit">
              <i class="ti ti-circle text-2xl text-white hover:text-green-400 transition-colors ease-in-out duration-100" />
            </button>
            <div class="w-full">
              <h1 class="text-gray-300 text-lg">{task.title}</h1>
            </div>
          </div>
        ))
      }
    </div>
    <Footer />
    <Modal />
  </main>
</Layout>
